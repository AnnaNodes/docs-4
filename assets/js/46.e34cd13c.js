(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{489:function(e,t,o){"use strict";o.r(t);var r=o(8),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"profiling-with-pprof"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#profiling-with-pprof"}},[e._v("#")]),e._v(" Profiling with pprof")]),e._v(" "),o("ol",[o("li",[e._v("Query the pprof cpu endpoint on the node host:\n"),o("ul",[o("li",[o("strong",[e._v("CPU")]),e._v(": "),o("code",[e._v("curl -X GET localhost:6060/debug/pprof/profile?seconds=<number> > <filename>")])]),e._v(" "),o("li",[o("strong",[e._v("Heap")]),e._v(": "),o("code",[e._v("curl -X GET localhost:6060/debug/debug/pprof/heap?seconds=<number> > <filename>")])]),e._v(" "),o("li",[e._v("can query from your local machine by substituting localhost with the IP of the node, depending on your network setup. By doing this, can skip step 2.")])])]),e._v(" "),o("li",[e._v("If querying on the node host, SCP the file to yourself: "),o("code",[e._v("scp <filename> <user>@<host>:<path>")]),e._v(" "),o("ul",[o("li",[e._v("E.g. "),o("code",[e._v("scp <filename> root@143.182.133.71:/home/roman/osmosis/pprof")])]),e._v(" "),o("li",[e._v("ensure that your ISP or firewall is not blocking the file transfer")])])]),e._v(" "),o("li",[e._v("Run a web server and open up a browser"),o("code",[e._v("go tool pprof -http=localhost:8080 <filename>")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("graphviz")]),e._v(" must be installed")])])])]),e._v(" "),o("h4",{attrs:{id:"useful-links"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#useful-links"}},[e._v("#")]),e._v(" Useful links:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://pkg.go.dev/net/http/pprof",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://pkg.go.dev/net/http/pprof"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://graphviz.org/download/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://graphviz.org/download/"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://linuxize.com/post/how-to-use-scp-command-to-securely-transfer-files/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Using SCP"),o("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);